<!DOCTYPE html>
<html lang="zh-Hant">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eat Party</title>
    <link rel="stylesheet" href="style.css">

    <!-- MediaPipe dependencies -->
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/control_utils/control_utils.js"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/face_mesh.js" crossorigin="anonymous"></script>
    <!-- Add MediaPipe Hands -->
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js" crossorigin="anonymous"></script>

    <!-- Three.js dependencies -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/libs/fflate.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/loaders/FBXLoader.js"></script>
</head>

<body>

    <div id="game-container">
        <!-- Hidden input video -->
        <video id="input-video" playsinline></video>

        <!-- Game drawing canvas -->
        <canvas id="output-canvas"></canvas>
        <canvas id="three-canvas"></canvas>

        <!-- UI Overlay -->
        <div id="ui-layer">
            <div class="hud-top">
                <span id="score">得分: 0</span>
                <span id="status">準備中...</span>
            </div>
            <div id="center-message" class="center-message">張開嘴巴!</div>

            <!-- Score popup container (below score text) -->
            <div id="score-popup-container"></div>

            <!-- Combo display (left side) -->
            <div id="combo-container"></div>

            <!-- Milestone English word (top-right) -->
            <div id="milestone-container"></div>

            <!-- Juice splatter (fullscreen overlay) -->
            <div id="splash-container"></div>

            <!-- Countdown Timer (Top Center) -->
            <div id="game-timer">
                <div id="timer-bg"></div>
                <div id="timer-progress"></div>
                <div id="timer-digits"></div>
            </div>

            <!-- Start Countdown (3-2-1) -->
            <div id="countdown" class="hidden">3</div>
            <div id="countdown-instruction">OPEN YOUR MOUTH AND EAT FRUIT!!!</div>

            <!-- Game Over Screen (v0.7.7) -->
            <div id="game-over-screen" class="hidden">
                <img id="win-image" src="fx/win.png" alt="YOU WIN">
                <div id="final-score">SCORE: 0</div>
                <img id="retry-button" src="fx/retry.png" alt="RETRY">
            </div>

            <div class="version-tag">版本 v0.9.8 - 更新音效資源</div>

            <!-- Debug Overlay (HTML-based to avoid mirroring) -->
            <!-- Debug Overlay removed by user request (v0.9.4) -->
        </div>

        <!-- Loading Screen -->
        <div id="loading">
            <div class="spinner"></div>
            <div id="loading-text">載入中...</div>
            <div id="loading-log"></div>
        </div>

        <!-- Start Screen -->
        <div id="start-screen">
            <div id="start-title">EAT PARTY！</div>
            <button id="start-btn">START</button>
            <div id="start-instruction">Open your mouth and eat fruit.</div>
        </div>
    </div>

    <!-- Main Logic -->
    <script src="audio_assets.js?t=1771000008"></script>
    <script src="audio_manager.js?t=1771000008"></script>
    <script src="fruit_config.js?t=1771000008"></script>
    <script src="physics.js?t=1771000008"></script>
    <script src="path_data.js?t=1771000008"></script>
    <script src="fruit_spawner.js?t=1771000008"></script>
    <script src="assets.js?t=1771000008"></script>
    <script src="ui_effects.js?t=1771000008"></script>
    <script src="chili_asset.js?t=1771000008"></script>
    <script src="watermelon_asset.js?t=1771000008"></script>
    <script src="lemon_data.js?t=1771000008"></script>
    <script src="orange_data.js?t=1771000008"></script>
    <script src="avocado_data.js?t=1771000008"></script>
    <script src="script.js?t=1771000008"></script>
</body>

</html>